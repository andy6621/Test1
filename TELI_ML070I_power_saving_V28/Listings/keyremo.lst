C51 COMPILER V9.60.0.0   KEYREMO                                                           01/14/2021 16:13:45 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE KEYREMO
OBJECT MODULE PLACED IN .\Output\keyremo.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE keyremo.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Include) DEBUG OBJECTE
                    -XTEND PRINT(.\Listings\keyremo.lst) TABS(2) OBJECT(.\Output\keyremo.obj)

line level    source

   1          /*****************************************************************************/
   2          /*                                                                                              */
   3          /*  TELI ML070I   MCU                                             */
   4          /*                                                                                              */
   5          /*  keyremo.c                                                                   */
   6          /*                                                                                              */
   7          /*****************************************************************************/
   8          
   9          #include "config.h"
  10          #include "typedefs.h"
  11          #include "keyremo.h"
  12          #include "main.h"
  13          #include "i2c.h"
  14          #include "cpu.h"
  15          #include "printf.h"
  16          #include "reg.h"
  17          #include "etc_eep.h"
  18          #include "HS_DVRProtocol.h"
  19          
  20          extern bit  RepeatKey;
  21          extern  DATA  WORD  tic_pc;
  22          extern  bit KeyReady;
  23          extern  DATA BYTE Key;
  24          extern  BYTE  keyticSec;
  25          extern BYTE DVR_FACTORY_MODE;
  26          extern BYTE PowerFlag;
  27          extern BYTE  updn_reg[4];
  28          extern short EncorderCount;
  29          extern bit ChangeKey;
  30          
  31          void Scankey(void)
  32          {
  33   1      
  34   1        if( GetKey(1)) 
  35   1        {
  36   2      
  37   2        if((DVR_FACTORY_MODE==ON)&&(PowerFlag==ON))
  38   2        {
  39   3        DVR_FACTORY_MODE=OFF;//reset value
  40   3        MCUTimerActiveTimerEvent(SEC(0.5), _USER_TIMER_EVENT_OSD_DVR_FACTORY_MODE);
  41   3        }
  42   2        else
  43   2           MCUTimerActiveTimerEvent(SEC(0.1), _SYSTEM_TIMER_EVENT_JUDGE_PSW_STATE);
  44   2        }
  45   1      
  46   1      }
  47          
  48          //=============================================================================
  49          //    Get Key 
  50          //=============================================================================
  51          BYTE GetKey(BYTE repeat)
  52          {
  53   1      
  54   1      bit ready;
C51 COMPILER V9.60.0.0   KEYREMO                                                           01/14/2021 16:13:45 PAGE 2   

  55   1      
  56   1        ready = KeyReady;
  57   1        KeyReady = 0;
  58   1        
  59   1        if( !ready ) return 0;
  60   1        if( repeat ) return Key;
  61   1        if( !RepeatKey ) return Key;
  62   1      
  63   1        return 0;
  64   1      }
  65          
  66          
  67          
  68          
  69          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     73    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
